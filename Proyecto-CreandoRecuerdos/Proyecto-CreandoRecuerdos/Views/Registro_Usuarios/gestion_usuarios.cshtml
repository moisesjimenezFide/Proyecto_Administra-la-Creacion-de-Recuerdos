@model List<Proyecto_CreandoRecuerdos.Models.UsuarioModel>

@{
    ViewBag.Title = "Gestion de usuarios";
}

<link rel="stylesheet" href="~/Templates/css/gestion_usuarios.css" />

<div class="container usuarios-container py-5">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="mb-0" style="color: var(--texto-oscuro);">Gestión de Usuarios</h2>
        <a href="@Url.Action("registro_usuarios", "Registro_Usuarios")" class="btn btn-primary">
            <i class="fas fa-plus-circle"></i> Nuevo Usuario
        </a>
    </div>

    <div class="card shadow-sm" style="border-radius: 15px; border: none;">
        <div class="card-body p-0">
            <div class="table-responsive">
                <table class="table table-hover mb-0 usuarios-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Nombre</th>
                            <th>Rol</th>
                            <th>Correo</th>
                            <th>Fecha Creación</th>
                            <th>Estado</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var usuario in Model)
                        {
                            <tr>
                                <td>@usuario.id</td>
                                <td>@usuario.nombre</td>
                                <td>
                                    @if (usuario.id_rol == 1)
                                    {
                                        <span class="badge bg-admin">Administrador</span>
                                    }
                                    else if (usuario.id_rol == 2)
                                    {
                                        <span class="badge bg-trabajador">Trabajador</span>
                                    }
                                    else
                                    {
                                        <span class="badge bg-usuario">Usuario</span>
                                    }
                                </td>
                                <td>@usuario.correo</td>
                                <td>@usuario.fecha_creacion.ToString("dd/MM/yyyy")</td>
                                <td>
                                    @if (usuario.activo)
                                    {
                                        <span class="badge bg-activo">Activo</span>
                                    }
                                    else
                                    {
                                        <span class="badge bg-inactivo">Inactivo</span>
                                    }
                                </td>
                                <td>
                                    <div class="d-flex gap-2 acciones-usuario">
                                        <form action="@Url.Action("editar_usuario", "Registro_Usuarios")" style="display:inline;">
                                            <input type="hidden" name="id" value="@usuario.id" />
                                            <button type="submit" class="btn btn-sm btn-modificar" title="Inactivar">
                                                <i class="fas fa-edit"></i>
                                            </button>
                                        </form>


                                        @if (usuario.activo)
                                        {
                                            <form action="@Url.Action("inactivar_usuarios", "Registro_Usuarios")" method="post" style="display:inline;">
                                                <input type="hidden" name="id" value="@usuario.id" />
                                                <button type="submit" class="btn btn-sm btn-inactivar" title="Inactivar">
                                                    <i class="fas fa-user-slash"></i>
                                                </button>
                                            </form>

                                        }
                                        else
                                        {
                                            <form action="@Url.Action("activar_usuarios", "Registro_Usuarios")" method="post" style="display:inline;">
                                                <input type="hidden" name="id" value="@usuario.id" />
                                                <button type="submit" class="btn btn-sm btn-activar" title="Activar">
                                                    <i class="fas fa-user-check"></i>
                                                </button>
                                            </form>

                                        }
                                    </div>
                                </td>
                            </tr>
                        }
                    </tbody>

                </table>
            </div>
        </div>
    </div>
</div>
